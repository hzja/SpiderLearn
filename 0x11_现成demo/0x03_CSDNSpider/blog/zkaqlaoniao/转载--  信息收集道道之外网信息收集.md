# 转载
：  信息收集道道之外网信息收集

# 信息收集道道之外网信息收集

本篇文章篇幅过长，需要耐心观看呦~

**目录**

[Tell Me](#Tell%20Me)

[外网信息收集](#%E5%A4%96%E7%BD%91%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86)

[0x00 常用工具、资源简记：](#0x00%20%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7%E3%80%81%E8%B5%84%E6%BA%90%E7%AE%80%E8%AE%B0%EF%BC%9A)

[0x01 主域名信息](#0x01%20%E4%B8%BB%E5%9F%9F%E5%90%8D%E4%BF%A1%E6%81%AF)

[1. ICP备案](#1.%20ICP%E5%A4%87%E6%A1%88)

[备案信息查询：](#%E5%A4%87%E6%A1%88%E4%BF%A1%E6%81%AF%E6%9F%A5%E8%AF%A2%EF%BC%9A)

[备案反查主域名](#%E5%A4%87%E6%A1%88%E5%8F%8D%E6%9F%A5%E4%B8%BB%E5%9F%9F%E5%90%8D)

[2. Whois](#2.%20Whois)

[3. IP反查](#3.%20IP%E5%8F%8D%E6%9F%A5)

[如何查询](#%E5%A6%82%E4%BD%95%E6%9F%A5%E8%AF%A2)

[4. HOST碰撞](#4.%20HOST%E7%A2%B0%E6%92%9E)

[5. DNS共享记录](#5.%20DNS%E5%85%B1%E4%BA%AB%E8%AE%B0%E5%BD%95)

[关于DNS](#%E5%85%B3%E4%BA%8EDNS)

[利用价值](#%E5%88%A9%E7%94%A8%E4%BB%B7%E5%80%BC)

[手法](#%E6%89%8B%E6%B3%95)

[6. Google](#6.%20Google)

[7. 配置信息](#7.%20%E9%85%8D%E7%BD%AE%E4%BF%A1%E6%81%AF)

[8. 众测](#8.%20%E4%BC%97%E6%B5%8B)

[9. 企业资产信息](#9.%20%E4%BC%81%E4%B8%9A%E8%B5%84%E4%BA%A7%E4%BF%A1%E6%81%AF)

[股权投资信息](#%E8%82%A1%E6%9D%83%E6%8A%95%E8%B5%84%E4%BF%A1%E6%81%AF)

[公众号信息](#%E5%85%AC%E4%BC%97%E5%8F%B7%E4%BF%A1%E6%81%AF)

[小程序](#%E5%B0%8F%E7%A8%8B%E5%BA%8F)

[应用信息](#%E5%BA%94%E7%94%A8%E4%BF%A1%E6%81%AF)

[关于工具](#%E5%85%B3%E4%BA%8E%E5%B7%A5%E5%85%B7)

[0x02 子域名信息](#0x02%20%E5%AD%90%E5%9F%9F%E5%90%8D%E4%BF%A1%E6%81%AF)

[1. 枚举爆破](#1.%20%E6%9E%9A%E4%B8%BE%E7%88%86%E7%A0%B4)

[手法介绍](#%E6%89%8B%E6%B3%95%E4%BB%8B%E7%BB%8D)

[关于泛解析](#%E5%85%B3%E4%BA%8E%E6%B3%9B%E8%A7%A3%E6%9E%90)

[枚举爆破常用工具：](#%E6%9E%9A%E4%B8%BE%E7%88%86%E7%A0%B4%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7%EF%BC%9A)

[关于字典](#%E5%85%B3%E4%BA%8E%E5%AD%97%E5%85%B8)

[2. DNS域传送](#2.%20DNS%E5%9F%9F%E4%BC%A0%E9%80%81)

[检测方法：](#%E6%A3%80%E6%B5%8B%E6%96%B9%E6%B3%95%EF%BC%9A)

[nslookup](#nslookup)

[Dig](#Dig)

[其他](#%E5%85%B6%E4%BB%96)

[3. 证书透明度收集子域](#3.%20%E8%AF%81%E4%B9%A6%E9%80%8F%E6%98%8E%E5%BA%A6%E6%94%B6%E9%9B%86%E5%AD%90%E5%9F%9F)

[收集方法：](#%E6%94%B6%E9%9B%86%E6%96%B9%E6%B3%95%EF%BC%9A)

[在线查询：](#%E5%9C%A8%E7%BA%BF%E6%9F%A5%E8%AF%A2%EF%BC%9A)

[浏览器查询](#%E6%B5%8F%E8%A7%88%E5%99%A8%E6%9F%A5%E8%AF%A2)

[工具：](#%E5%B7%A5%E5%85%B7%EF%BC%9A)

[4. 公开数据集](#4.%20%E5%85%AC%E5%BC%80%E6%95%B0%E6%8D%AE%E9%9B%86)

[5. 第三方聚合服务](#5.%20%E7%AC%AC%E4%B8%89%E6%96%B9%E8%81%9A%E5%90%88%E6%9C%8D%E5%8A%A1)

[6. 搜索引擎](#6.%20%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E)

[介绍](#%E4%BB%8B%E7%BB%8D)

[搜索方法：](#%E6%90%9C%E7%B4%A2%E6%96%B9%E6%B3%95%EF%BC%9A)

[主流搜索引擎](#%E4%B8%BB%E6%B5%81%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E)

[Goolge：](#Goolge%EF%BC%9A)

[网络空间引擎](#%E7%BD%91%E7%BB%9C%E7%A9%BA%E9%97%B4%E5%BC%95%E6%93%8E)

[fofa](#fofa)

[Shodan](#Shodan)

[0.zone](#0.zone)

[hunter](#hunter)

[其他](#%E5%85%B6%E4%BB%96)

[7. 工具自动化](#7.%20%E5%B7%A5%E5%85%B7%E8%87%AA%E5%8A%A8%E5%8C%96)

[OneForAll](#OneForAll)

[subfinder](#subfinder)

[ksubdomain](#ksubdomain)

[JSINFO-SCAN](#JSINFO-SCAN)

[URLFinder](#URLFinder)

[Layer子域名挖掘机](#Layer%E5%AD%90%E5%9F%9F%E5%90%8D%E6%8C%96%E6%8E%98%E6%9C%BA)

[ESD](#ESD)

[EyeWitness](#EyeWitness)

[0x03 IP信息收集](#0x03%20IP%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86)

[1. 绕过CDN获取真实ip](#1.%20%E7%BB%95%E8%BF%87CDN%E8%8E%B7%E5%8F%96%E7%9C%9F%E5%AE%9Eip)

[简述](#%E7%AE%80%E8%BF%B0)

[常见CDN服务商](#%E5%B8%B8%E8%A7%81CDN%E6%9C%8D%E5%8A%A1%E5%95%86)

[CDN判断](#CDN%E5%88%A4%E6%96%AD)

[0x01 多ping](#0x01%20%E5%A4%9Aping)

[0x02 nslookup](#0x02%20nslookup)

[0x03 header头信息](#0x03%20header%E5%A4%B4%E4%BF%A1%E6%81%AF)

[0x04 在线检测工具](#0x04%20%E5%9C%A8%E7%BA%BF%E6%A3%80%E6%B5%8B%E5%B7%A5%E5%85%B7)

[获取真实IP](#%E8%8E%B7%E5%8F%96%E7%9C%9F%E5%AE%9EIP)

[0x01 dns历史绑定记录](#0x01%20dns%E5%8E%86%E5%8F%B2%E7%BB%91%E5%AE%9A%E8%AE%B0%E5%BD%95)

[0x02 网络空间测绘搜索引擎](#0x02%C2%A0%E7%BD%91%E7%BB%9C%E7%A9%BA%E9%97%B4%E6%B5%8B%E7%BB%98%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E)

[0x03 子域名](#0x03%20%E5%AD%90%E5%9F%9F%E5%90%8D)

[0x04 异地ping](#0x04%20%E5%BC%82%E5%9C%B0ping)

[0x05 SSL证书](#0x05%20SSL%E8%AF%81%E4%B9%A6)

[在线：](#%E5%9C%A8%E7%BA%BF%EF%BC%9A)

[命令行](#%E5%91%BD%E4%BB%A4%E8%A1%8C)

[工具：](#%E5%B7%A5%E5%85%B7%EF%BC%9A)

[0x06 敏感文件泄露](#0x06%20%E6%95%8F%E6%84%9F%E6%96%87%E4%BB%B6%E6%B3%84%E9%9C%B2)

[0x07 CDN配置问题](#0x07%20CDN%E9%85%8D%E7%BD%AE%E9%97%AE%E9%A2%98)

[0x08 漏洞](#0x08%20%E6%BC%8F%E6%B4%9E)

[0x09 邮件头信息](#0x09%20%E9%82%AE%E4%BB%B6%E5%A4%B4%E4%BF%A1%E6%81%AF)

[0x10 vhost碰撞](#0x10%20vhost%E7%A2%B0%E6%92%9E)

[0x11 应用程序](#0x11%20%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F)

[0x12 通过 F5 LTM 解码](#0x12%C2%A0%E9%80%9A%E8%BF%87%20F5%20LTM%20%E8%A7%A3%E7%A0%81)

[0x13 其他](#0x13%20%E5%85%B6%E4%BB%96)

[真实ip验证：](#%E7%9C%9F%E5%AE%9Eip%E9%AA%8C%E8%AF%81%EF%BC%9A)

[cdn节点判断](#cdn%E8%8A%82%E7%82%B9%E5%88%A4%E6%96%AD)

[真实IP使用：](#%E7%9C%9F%E5%AE%9EIP%E4%BD%BF%E7%94%A8%EF%BC%9A)

[2. 组织IP段](#2.%20%E7%BB%84%E7%BB%87IP%E6%AE%B5)

[3. C段](#3.%20C%E6%AE%B5)

[C段主要收集点：](#C%E6%AE%B5%E4%B8%BB%E8%A6%81%E6%94%B6%E9%9B%86%E7%82%B9%EF%BC%9A)

[扫描常用工具：](#%E6%89%AB%E6%8F%8F%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7%EF%BC%9A)

[网络空间搜索引擎（fofa、quake...)](#%E7%BD%91%E7%BB%9C%E7%A9%BA%E9%97%B4%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E%EF%BC%88fofa%E3%80%81quake...%29)

[nmap](#nmap)

[msscan](#msscan)

[Goby](#Goby)

[shuize](#shuize)

[fscan](#fscan)

[ALLin](#ALLin)

[4. 旁站（ip反查域名）](#4.%20%E6%97%81%E7%AB%99%EF%BC%88ip%E5%8F%8D%E6%9F%A5%E5%9F%9F%E5%90%8D%EF%BC%89)

[常见查询方法：](#%E5%B8%B8%E8%A7%81%E6%9F%A5%E8%AF%A2%E6%96%B9%E6%B3%95%EF%BC%9A)

[5. 端口](#5.%20%E7%AB%AF%E5%8F%A3)

[端口渗透思路表](#%E7%AB%AF%E5%8F%A3%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E8%A1%A8)

[6. IP定位](#6.%20IP%E5%AE%9A%E4%BD%8D)

[0x04 指纹信息](#0x04%20%E6%8C%87%E7%BA%B9%E4%BF%A1%E6%81%AF)

[1. CMS](#1.%20CMS)

[开发语言识别思路](#%E5%BC%80%E5%8F%91%E8%AF%AD%E8%A8%80%E8%AF%86%E5%88%AB%E6%80%9D%E8%B7%AF)

[服务器系统识别思路](#%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%B3%BB%E7%BB%9F%E8%AF%86%E5%88%AB%E6%80%9D%E8%B7%AF)

[CMS识别思路](#CMS%E8%AF%86%E5%88%AB%E6%80%9D%E8%B7%AF)

[特定文件的MD5](#%E7%89%B9%E5%AE%9A%E6%96%87%E4%BB%B6%E7%9A%84MD5)

[页面关键字](#%E9%A1%B5%E9%9D%A2%E5%85%B3%E9%94%AE%E5%AD%97)

[请求头信息关键字](#%E8%AF%B7%E6%B1%82%E5%A4%B4%E4%BF%A1%E6%81%AF%E5%85%B3%E9%94%AE%E5%AD%97)

[url关键字](#url%E5%85%B3%E9%94%AE%E5%AD%97)

[在线平台](#%E5%9C%A8%E7%BA%BF%E5%B9%B3%E5%8F%B0)

[工具](#%E5%B7%A5%E5%85%B7)

[浏览器插件](#%E6%B5%8F%E8%A7%88%E5%99%A8%E6%8F%92%E4%BB%B6)

[2. WAF](#2.%20WAF)

[手工](#%E6%89%8B%E5%B7%A5)

[工具](#%E5%B7%A5%E5%85%B7)

[3. 组件](#3.%20%E7%BB%84%E4%BB%B6)

[4. 信息处理](#4.%20%E4%BF%A1%E6%81%AF%E5%A4%84%E7%90%86)

[Ehole](#Ehole)

[AlliN](#AlliN)

[Bufferfly](#Bufferfly)

[HKTools](#HKTools)

[EyeWitness](#EyeWitness)

[anew(去重)](#anew%28%E5%8E%BB%E9%87%8D%29)

[0x05 敏感信息](#0x05%20%E6%95%8F%E6%84%9F%E4%BF%A1%E6%81%AF)

[1. 目录结构及敏感文件](#1.%20%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84%E5%8F%8A%E6%95%8F%E6%84%9F%E6%96%87%E4%BB%B6)

[常见敏感目录及文件](#%E5%B8%B8%E8%A7%81%E6%95%8F%E6%84%9F%E7%9B%AE%E5%BD%95%E5%8F%8A%E6%96%87%E4%BB%B6)

[工具推荐](#%E5%B7%A5%E5%85%B7%E6%8E%A8%E8%8D%90)

[dirsearch](#dirsearch)

[feroxbuster](#feroxbuster)

[yjdirscan](#yjdirscan)

[字典推荐](#%E5%AD%97%E5%85%B8%E6%8E%A8%E8%8D%90)

[fuzzDicts](#fuzzDicts)

[Web-Fuzzing-Box](#Web-Fuzzing-Box)

[XXE 暴力枚举字典](#XXE%20%E6%9A%B4%E5%8A%9B%E6%9E%9A%E4%B8%BE%E5%AD%97%E5%85%B8)

[2. JS信息收集](#2.%20JS%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86)

[JS信息查找方法](#JS%E4%BF%A1%E6%81%AF%E6%9F%A5%E6%89%BE%E6%96%B9%E6%B3%95)

[1. 手工](#1.%20%E6%89%8B%E5%B7%A5)

[2. 半自动](#2.%20%E5%8D%8A%E8%87%AA%E5%8A%A8)

[3. 工具：](#3.%20%E5%B7%A5%E5%85%B7%EF%BC%9A)

[4. 其他辅助工具](#4.%20%E5%85%B6%E4%BB%96%E8%BE%85%E5%8A%A9%E5%B7%A5%E5%85%B7)

[历史界面](#%E5%8E%86%E5%8F%B2%E7%95%8C%E9%9D%A2)

[反混肴](#%E5%8F%8D%E6%B7%B7%E8%82%B4)

[url采集](#url%E9%87%87%E9%9B%86)

[js中关键信息简记](#js%E4%B8%AD%E5%85%B3%E9%94%AE%E4%BF%A1%E6%81%AF%E7%AE%80%E8%AE%B0)

[3. Google Hacking](#3.%20Google%20Hacking)

[说明](#%E8%AF%B4%E6%98%8E)

[hacking常用语法](#hacking%E5%B8%B8%E7%94%A8%E8%AF%AD%E6%B3%95)

[管理后台地址](#%E7%AE%A1%E7%90%86%E5%90%8E%E5%8F%B0%E5%9C%B0%E5%9D%80)

[上传类漏洞地址](#%E4%B8%8A%E4%BC%A0%E7%B1%BB%E6%BC%8F%E6%B4%9E%E5%9C%B0%E5%9D%80)

[注入页面](#%E6%B3%A8%E5%85%A5%E9%A1%B5%E9%9D%A2)

[编辑器页面](#%E7%BC%96%E8%BE%91%E5%99%A8%E9%A1%B5%E9%9D%A2)

[目录遍历漏洞](#%E7%9B%AE%E5%BD%95%E9%81%8D%E5%8E%86%E6%BC%8F%E6%B4%9E)

[SQL错误](#SQL%E9%94%99%E8%AF%AF)

[公开文件泄露](#%E5%85%AC%E5%BC%80%E6%96%87%E4%BB%B6%E6%B3%84%E9%9C%B2)

[邮箱信息](#%E9%82%AE%E7%AE%B1%E4%BF%A1%E6%81%AF)

[社工信息](#%E7%A4%BE%E5%B7%A5%E4%BF%A1%E6%81%AF)

[tips：](#tips%EF%BC%9A)

[百度语法](#%E7%99%BE%E5%BA%A6%E8%AF%AD%E6%B3%95)

[图片反查](#%E5%9B%BE%E7%89%87%E5%8F%8D%E6%9F%A5)

[百度识图、googleimage、tineye等识图引擎](#%E7%99%BE%E5%BA%A6%E8%AF%86%E5%9B%BE%E3%80%81googleimage%E3%80%81tineye%E7%AD%89%E8%AF%86%E5%9B%BE%E5%BC%95%E6%93%8E)

[从图片原图获取坐标](#%E4%BB%8E%E5%9B%BE%E7%89%87%E5%8E%9F%E5%9B%BE%E8%8E%B7%E5%8F%96%E5%9D%90%E6%A0%87)

[在线查看器](#%E5%9C%A8%E7%BA%BF%E6%9F%A5%E7%9C%8B%E5%99%A8)

[经纬度转地址](#%E7%BB%8F%E7%BA%AC%E5%BA%A6%E8%BD%AC%E5%9C%B0%E5%9D%80)

[4. Github信息收集](#4.%20Github%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86)

[Github搜索语法](#Github%E6%90%9C%E7%B4%A2%E8%AF%AD%E6%B3%95)

[收集工具](#%E6%94%B6%E9%9B%86%E5%B7%A5%E5%85%B7)

[GitDorker](#GitDorker)

[trufflehog](#trufflehog)

[其他检索方法：](#%E5%85%B6%E4%BB%96%E6%A3%80%E7%B4%A2%E6%96%B9%E6%B3%95%EF%BC%9A)

[代码仓库在线搜索平台](#%E4%BB%A3%E7%A0%81%E4%BB%93%E5%BA%93%E5%9C%A8%E7%BA%BF%E6%90%9C%E7%B4%A2%E5%B9%B3%E5%8F%B0)

[pinatahub](#pinatahub)

[searchcode](#searchcode)

[其他仓库](#%E5%85%B6%E4%BB%96%E4%BB%93%E5%BA%93)

[5. 邮箱信息收集](#5.%20%E9%82%AE%E7%AE%B1%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86)

[邮箱入口查找方法](#%E9%82%AE%E7%AE%B1%E5%85%A5%E5%8F%A3%E6%9F%A5%E6%89%BE%E6%96%B9%E6%B3%95)

[C段扫描寻找入口](#C%E6%AE%B5%E6%89%AB%E6%8F%8F%E5%AF%BB%E6%89%BE%E5%85%A5%E5%8F%A3)

[通过子域名扫描寻找入口](#%E9%80%9A%E8%BF%87%E5%AD%90%E5%9F%9F%E5%90%8D%E6%89%AB%E6%8F%8F%E5%AF%BB%E6%89%BE%E5%85%A5%E5%8F%A3)

[通过搜索引擎寻找入口](#%E9%80%9A%E8%BF%87%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E%E5%AF%BB%E6%89%BE%E5%85%A5%E5%8F%A3)

[邮箱收集方法](#%E9%82%AE%E7%AE%B1%E6%94%B6%E9%9B%86%E6%96%B9%E6%B3%95)

[搜索引擎](#%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E)

[Google Hacking](#Google%20Hacking)

[网络空间搜索引擎](#%E7%BD%91%E7%BB%9C%E7%A9%BA%E9%97%B4%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E)

[在线收集平台](#%E5%9C%A8%E7%BA%BF%E6%94%B6%E9%9B%86%E5%B9%B3%E5%8F%B0)

[Snov.io](#Snov.io)

[hunter](#hunter)

[phonebook](#phonebook)

[intelx](#intelx)

[skymem](#skymem)

[爱企查、企查查等批量查询](#%E7%88%B1%E4%BC%81%E6%9F%A5%E3%80%81%E4%BC%81%E6%9F%A5%E6%9F%A5%E7%AD%89%E6%89%B9%E9%87%8F%E6%9F%A5%E8%AF%A2)

[邮箱泄露信息查询](#%E9%82%AE%E7%AE%B1%E6%B3%84%E9%9C%B2%E4%BF%A1%E6%81%AF%E6%9F%A5%E8%AF%A2)

[其他](#%E5%85%B6%E4%BB%96)

[工具收集](#%E5%B7%A5%E5%85%B7%E6%94%B6%E9%9B%86)

[theHarvester](#theHarvester)

[验证邮箱](#%E9%AA%8C%E8%AF%81%E9%82%AE%E7%AE%B1)

[在线平台](#%E5%9C%A8%E7%BA%BF%E5%B9%B3%E5%8F%B0)

[工具](#%E5%B7%A5%E5%85%B7)

[邮箱爆破](#%E9%82%AE%E7%AE%B1%E7%88%86%E7%A0%B4)

[常用字典组合](#%E5%B8%B8%E7%94%A8%E5%AD%97%E5%85%B8%E7%BB%84%E5%90%88)

[工具](#%E5%B7%A5%E5%85%B7)

[临时邮箱](#%E4%B8%B4%E6%97%B6%E9%82%AE%E7%AE%B1)

[匿名邮箱](#%E5%8C%BF%E5%90%8D%E9%82%AE%E7%AE%B1)

[6. 网盘信息收集](#6.%20%E7%BD%91%E7%9B%98%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86)

[在线平台](#%E5%9C%A8%E7%BA%BF%E5%B9%B3%E5%8F%B0)

[搜索关键词](#%E6%90%9C%E7%B4%A2%E5%85%B3%E9%94%AE%E8%AF%8D)

[爬虫](#%E7%88%AC%E8%99%AB)

[0x06 其他信息](#0x06%20%E5%85%B6%E4%BB%96%E4%BF%A1%E6%81%AF)

[1. APP](#1.%20APP)

[App查找入口](#App%E6%9F%A5%E6%89%BE%E5%85%A5%E5%8F%A3)

[搜索引擎](#%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E)

[在线聚合平台](#%E5%9C%A8%E7%BA%BF%E8%81%9A%E5%90%88%E5%B9%B3%E5%8F%B0)

[App敏感信息收集](#App%E6%95%8F%E6%84%9F%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86)

[手工收集](#%E6%89%8B%E5%B7%A5%E6%94%B6%E9%9B%86)

[工具推荐：](#%E5%B7%A5%E5%85%B7%E6%8E%A8%E8%8D%90%EF%BC%9A)

[2. OSINT](#2.%20OSINT)

[情报相关资源](#%E6%83%85%E6%8A%A5%E7%9B%B8%E5%85%B3%E8%B5%84%E6%BA%90)

[OSINT 情报工具](#OSINT%20%E6%83%85%E6%8A%A5%E5%B7%A5%E5%85%B7)

[3. 个人隐私信息](#3.%20%E4%B8%AA%E4%BA%BA%E9%9A%90%E7%A7%81%E4%BF%A1%E6%81%AF)

[从邮箱查询](#%E4%BB%8E%E9%82%AE%E7%AE%B1%E6%9F%A5%E8%AF%A2)

[从用户名查询](#%E4%BB%8E%E7%94%A8%E6%88%B7%E5%90%8D%E6%9F%A5%E8%AF%A2)

[从IP查询](#%E4%BB%8EIP%E6%9F%A5%E8%AF%A2)

[混合查询](#%E6%B7%B7%E5%90%88%E6%9F%A5%E8%AF%A2)

[从注册信息查询](#%E4%BB%8E%E6%B3%A8%E5%86%8C%E4%BF%A1%E6%81%AF%E6%9F%A5%E8%AF%A2)

[4. 历史漏洞](#4.%20%E5%8E%86%E5%8F%B2%E6%BC%8F%E6%B4%9E)

[5. 蜜罐识别](#5.%20%E8%9C%9C%E7%BD%90%E8%AF%86%E5%88%AB)

[工具向](#%E5%B7%A5%E5%85%B7%E5%90%91)

[参考](#%E5%8F%82%E8%80%83)

---


## Tell Me

想要构建一个"上帝视野"，前期的信息收集工作是必不可少的，无论是了解一个人、一项业务、还是深入一个系统等，都需要“信息”。大佬曾说过，渗透测试的本质是信息收集，而个人直观感受就是“意料之外，情理之中”。

本文就简单整理下打点前的信息收集那些事。从信息收集本质上来说多数内容都是大同小异，遇到坚壁时，不用死磕，毕竟条条大路通罗马。

> 
**红队知识点大致流程：**
外网信息收集——&gt;打点——&gt;权限维持——&gt;提权——&gt;内网信息收集——&gt;横向移动——&gt;痕迹清理
**打点关键资产数据信息：**



## 外网信息收集

对于外网信息收集主要有几点：ip、域名、企业等资产信息以及相应端口/服务、指纹、敏感信息、社工碰撞等易受攻击面信息。

> 
tips：



### 0x00 常用工具、资源简记：

|工具、网站|备注
|------
|[爱站](https://www.aizhan.com/)、[站长工具](https://tool.chinaz.com/)|Whois、备案号、权重、公司名称等
|[天眼查](https://www.tianyancha.com/)、[企查查](https://www.qichacha.com/)、[搜狗搜索引擎](https://wx.sogou.com/)|公司注册域名、微信公众号、APP、软件著作权等
|[ZoomEye](https://www.zoomeye.org/)、[Shodan](https://shodan.io/)、[FOFA](https://fofa.so/)、[0.Zone](https://0.zone/)、[quake](https://quake.360.cn/quake/#/index)|网络空间资产搜索引擎
|[ENScanGo](https://github.com/wgpsec/ENScan_GO)、[ICP备案](https://beian.miit.gov.cn/#/Integrated/index)|主域名收集
|[OneForAll](https://github.com/shmilylty/OneForAll)、[Layer](https://github.com/euphrat1ca/LayerDomainFinder)、[Rapid7的开源数据项目](https://opendata.rapid7.com/)、[ctfr](https://github.com/UnaPibaGeek/ctfr)、[EyeWitness](https://github.com/FortyNorthSecurity/EyeWitness)|子域名收集
|[Kscan](https://github.com/lcvvvv/kscan)、[ShuiZe_0x727](https://github.com/0x727/ShuiZe_0x727)、[ARL灯塔](https://github.com/TophantTechnology/ARL)、[Goby](https://gobies.org/)|自动化、批量信息收集
|[Bufferfly](https://github.com/dr0op/bufferfly)、[Ehole](https://github.com/EdgeSecurityTeam/EHole)|资产处理、信息筛选
|[dnsdb](https://dnsdb.io/zh-cn/)、[CloudFlair](https://github.com/christophetd/CloudFlair)|CDN相关
|[VirusTotal](https://www.virustotal.com/)、[微步](https://x.threatbook.cn/)、[ip2domain](https://github.com/Sma11New/ip2domain)|C段、域名/ip情报信息
|[Nmap](https://nmap.org/)、[Masscan](https://github.com/robertdavidgraham/masscan)|端口服务信息
|Google Hacking、[dirsearch](https://github.com/maurosoria/dirsearch)、[URLFinder](https://github.com/pingc0y/URLFinder)|WEB站点信息、api接口等
|[wafw00f](https://github.com/EnableSecurity/wafw00f)|waf识别
|[云悉](http://www.yunsee.cn/)、[潮汐](http://finger.tidesec.net/home/index/index.html)、[WhatWeb](https://www.whatweb.net/)|在线CMS识别
|[七麦](https://www.qimai.cn/)、[小蓝本](https://www.xiaolanben.com/pc)|APP资产
|[ApkAnalyser](https://github.com/TheKingOfDuck/ApkAnalyser)|App敏感信息
|[乌云漏洞库](https://wy.zone.ci/)、[CNVD](http://www.cnnvd.org.cn/)、[waybackurls](https://github.com/tomnomnom/waybackurls)|历史漏洞、历史资产等
|[n0tr00t/Sreg](https://github.com/n0tr00t/Sreg)、reg007|个人隐私信息
|[GitDorker](https://github.com/obheda12/GitDorker)|资产信息、源码泄露
|[theHarvester](https://github.com/laramies/theHarvester)、[Snov.io](https://app.snov.io/)|邮箱信息收集
|[OSINT开源情报和侦擦工具](https://start.me/p/GE7JQb/osint)|开源情报资源导航
|[anti-honeypot](https://github.com/cnrstar/anti-honeypot)、[Honeypot Hunter](https://send-safe-honeypot-hunter.apponic.com/)|蜜罐识别

### 0x01 主域名信息

> 
域名用来代替IP使其更容易被用户找到、记住。
对于"非用户"来说，可通过域名信息获取：主域名、存活站点、关联信息、钓鱼信息。为漏洞挖掘提供数据支撑。


#### 1. ICP备案

> 
国内服务器线上运营都必须先办理ICP备案后才能上线。


##### 备案信息查询：

[https://beian.miit.gov.cn/#/Integrated/index](https://beian.miit.gov.cn/#/Integrated/index)

##### 备案反查主域名

反查可分为备案域名查询和未备案域名查询。

**备案域名查询**

**未备案域名查询**

#### 2. Whois

> 
whois是用来查询域名的IP以及所有者等信息的传输协议。


通过whois信息可以获取注册人的关键信息。如注册商、联系人、联系邮箱、联系电话，也可以对注册人、邮箱、电话反查域名，也可以通过搜索引擎进一步挖掘域名所有人的信息。深入可社工、可漏洞挖掘利用。

> 
ps:



#### 3. IP反查

> 
ps:



##### 如何查询

**在线查询网站**：

**搜索引擎**：

#### 4. HOST碰撞

信息收集过程中，往往会因为配置错误或是未及时回收等原因，存在一些隐形资产。直接访问的话会出现访问限制的问题，如下：

究其原因，大多数是因为中间件对ip访问做限制，不能通过ip直接访问，必须使用域名进行访问。如果域名解析记录里也找不到域名记录，这时就可以用到HOST碰撞技术，通过将域名和IP进行捆绑碰撞，一旦匹配到后端代理服务器上的域名绑定配置，就可以访问到对应的业务系统，从而发现隐形资产。

**手法：**

使用收集到的目标IP、爬虫或自定义的内部域名（内网host池），作为字典，通过脚本进行碰撞，脚本会自动模拟绑定ip与host进行请求交互，通过标题或响应大小判断结果。只要字典够强大，总能出一两个，爆破时最好也试下TLS，部分主机会使用TLS的。

验证结果，只需修改本机`host文件`绑定host与ip后，看访问变化。

**自动化**：

#### 5. DNS共享记录

###### 关于DNS

DNS（Domain Name Server，域名服务器）是进行域名(domain name)和与之相对应的IP地址 (IP address)转换的服务器。DNS中保存了一张域名(domain name)和与之相对应的IP地址 (IP address)的表，以解析消息的域名，即保存了**IP地址**和**域名**的相互映射关系。域名是Internet上某一台计算机或计算机组的名称，用于在数据传输时标识计算机的电子方位（有时也指地理位置）。域名是由一串用点分隔的名字组成的，通常包含组织名，而且始终包括两到三个字母的后缀，以指明组织的类型或该域所在的国家或地区。也正是因为DNS的存在，访问相应服务只需记住域名，不需要记住无规则的ip地址。

###### 利用价值

可以通过查询共享DNS服务器的主机来获取到相关的域名，一般多是用于自建DNS服务器。如果是公开的DNS服务器，那么查询的效果将会特别差。

###### 手法

```
nslookup -query=ns baidu.com 8.8.8.8

```

#### 6. Google

直接搜索目标相关关键内容来查询，比如公司名、备案、引用的特殊js等。

搜索引擎很多，这里以Google为例：

#### 7. 配置信息

由于信息泄露问题，某些配置或文件会存储一些目标相关的域名，如子域名、代码托管平台等，一般来说存储信息有限且不应公网存在此类文件。

**策略文件域名信息问题如：**

**策略配置方面如**：

这是一种声明的安全机制，可以让网站运营者能够控制遵循CSP的用户代理（通常是浏览器）的行为。通过控制要启用哪些功能，以及从哪里下载内容，可以减少网站的攻击面。CSP的主要目的是防御跨站点脚本（cross-ste scripting，XSS）攻击。例如，CSP可以完全禁止内联的JavaScript，并且控制外部代码从哪里加载。它也可以禁止动态代码执行。禁用了所有的攻击源，XSS攻击变得更加困难。CSP中的关键字有default-src、img-src、object-src和script-src。其中*-src可能会存在域名信息。

关键点：

HTTP header的`Content-Security-Policy`属性

#### 8. 众测

补天、漏洞银行、先知、hackerone等众测的广商提供的域名测试范围。

比如hackerone：alibaba

#### 9. 企业资产信息

通过企业名称拓展查询目标企业的组织架构、股权信息、股权穿透图、子公司、孙公司、对外投资50%等目标信息，获取其产品业务、域名、邮箱资产范围等，扩大攻击面。大概企业资产收集点如下：

##### 股权投资信息

一般要求50%持股或者100% 持股都可以算测试目标。
1. **天眼查**
[天眼查-商业查询平台_企业信息查询_公司查询_工商查询_企业信用信息系统](https://www.tianyancha.com/)
1. **企查查**
[企查查 - 企业工商信息查询系统_查企业_查老板_查风险就上企查查!](https://www.qcc.com/)
1. **钉钉企典**
[企业信息查询-老板信息查询](https://www.dingtalk.com/qidian/home?spm=a213l2.13146415.4929779444.89.7f157166W6H4YZ)

##### 公众号信息
1. **搜狗搜索引擎**
[搜狗微信搜索_订阅号及文章内容独家收录，一搜即达](https://wx.sogou.com/)
1. 企查查
[企查查 - 企业工商信息查询系统_查企业_查老板_查风险就上企查查!](https://www.qcc.com/)

##### 小程序
1. 企查查
[企查查 - 企业工商信息查询系统_查企业_查老板_查风险就上企查查!](https://www.qcc.com/)
1. 微信app1. 支付宝app
##### 应用信息
1. **天眼查**
[天眼查-商业查询平台_企业信息查询_公司查询_工商查询_企业信用信息系统](https://www.tianyancha.com/)
1. **七麦数据**
[七麦数据 -专业移动产品商业分析平台-关键词优化-ASA优化-七麦科技](https://www.qimai.cn/)
1. **企查查**：
[企查查 - 企业工商信息查询系统_查企业_查老板_查风险就上企查查!](https://www.qcc.com/)
1. **小蓝本**
[小蓝本-商业信息搜索](https://www.xiaolanben.com/pc)
1. **点点数据**
[点点数据-App数据查询分析,AppStore排行榜,ASO,ASM优化平台](https://app.diandian.com/)
1. **豌豆荚**
[豌豆荚手机精灵 豌豆荚手机助手-海量安卓APP应用与游戏免费下载](https://www.wandoujia.com/)

方便获取app历史版本

##### 关于工具

[GitHub - wgpsec/ENScan_GO: 一款基于各大企业信息API的工具，解决在遇到的各种针对国内企业信息收集难题。一键收集控股公司ICP备案、APP、小程序、微信公众号等信息聚合导出。](https://github.com/wgpsec/ENScan_GO)

> 
由狼组安全团队的 Keac 师傅写的专门用来解决企业信息收集难的问题的工具，可以一键收集目标及其控股公司的 ICP 备案、APP、小程序、微信公众号等信息然后聚合导出。


### 0x02 子域名信息

子域名一般是父级域名的下一级。一般企业主站域名的防护都是重点，安全级别较高，突破难度较大，而企业可能会有数十个甚至更多的子域名应用，因为数量众多，安全因素和成本投入多，相应的防护也没有那么及时有效。子域名往往是攻击突破口，通过子域名发现更多的可能性或是进行迂回攻击。

**子域名信息点**：

#### 1. 枚举爆破

##### 手法介绍

要说简单粗暴还是子域名枚举爆破，通过不断的拼接`字典`中的子域名前缀去枚举域名的A记录进行`DNS解析`，如果成功解析说明子域名存在。如xxx.com拼接前缀test组合成test.xxx.com，再对其进行验证。但是域名如果使用`泛解析`的话，则会导致所有的域名都能成功解析，使得子域名枚举变得不精准。

`nslookup`验证下~

---


 

> 



##### 关于泛解析

那么域名使用了泛解析怎么去解决呢？

一般有两种：

##### **枚举爆破常用工具：**

在线查询：

其他：

##### 关于字典

> 
字典这块引用下[枚举子域名 FEEI/止介](https://feei.cn/esd/)


**DNS服务商的字典**一般来说最准确有效，如：DNSPod公布的使用最多的子域名：[dnspod-top2000-sub-domains.txt](https://github.com/DNSPod/oh-my-free-data/blob/master/src/dnspod-top2000-sub-domains.txt)

**普通字典**：一些基础组合。

可以通过查mx记录确定下是否第三方邮件服务器，当然这里这个邮箱很明显了。。

> 



###### 0x10 vhost碰撞

只要字典够强大，数据够多，通过 IP 和子域的碰撞，总会有所收获。

在线工具：

[Virtual host discovery for any IP address - Pentest-Tools.com](https://pentest-tools.com/information-gathering/find-virtual-hosts#)

###### 0x11 应用程序

一些app、小程序会直接采用ip进行通信交互，也可以通过一些历史版本探测真实ip。

###### 0x12 **通过 F5 LTM 解码**

> 
一般常用的负载均衡实现方式：



**例如：基于cookie会话保持情况：**

F5在获取到客户端第一次请求时，会使用set cookie头，给客户端标记一个特定的cookie。

```
Set-Cookie: BIGipServerPool-i-am-na\_tcp443=2388933130.64288.0000; path=/;

```

后续客户端请求时，F5都会去校验cookie中得字段，判断交给那个服务器处理。那么就可以利用此机制，获取处理服务器的ip地址，大概率也是网站服务器真实ip。具体解法如下：

一般来说基本都是内网ip，但也有例外，得看部署情况，无意间找到一个：

```
Set-Cookie: BIGipServerpool-shibboleth3-dev-8080=3045805720.36895.0000; path=/; Httponly

```

自动化解码工具：

[https://github.com/ezelf/f5_cookieLeaks](https://github.com/ezelf/f5_cookieLeaks)

```
Set-Cookie: BIGipServerpool-shibboleth3-dev-8080=3045805720.36895.0000; path=/; Httponly

```

###### 0x13 其他

更多方法可以参考binmaker大佬的总结：

[渗透测试中最全的CDN绕过总结](https://mp.weixin.qq.com/s?__biz=MzIzNzMxMDkxNw==&amp;mid=2247490046&amp;idx=1&amp;sn=994fc288c54907e7317c6818e2e2507b&amp;chksm=e8cbdf54dfbc5642dd5ac26de38bfcf5749614d5bf6ba5bb61cb9078a59027d6ee7f5e183ad1#rd)

##### 真实ip验证：

###### cdn节点判断

对于一些cdn节点可以使用阿里云的CDN节点判断验证找到的ip是否为CDN节点：

[检测IP地址 - CDN - 阿里云](https://www.alibabacloud.com/help/zh/alibaba-cloud-cdn/latest/query-ip-addresses)

###### 真实IP使用：

如果是假，则返回cdn信息

#### 2. 组织IP段

当目标信息比较笼统时，可以通过IP地址注册信息查询运营商给目标组织所分配的ip段信息，继而对这个段进行测试。这样既可以扩大范围也有可能直接找到CDN后的真实服务器。

以阿里为例，收集组织对应ip信息

#### 3. C段

一般都是扫C段为主，B段为辅。通过获取同在一个ip段的同类型网站或业务来扩大攻击面，往往同ip段中会存在一些后台、api相关处理服务等。

##### C段主要收集点：

##### 扫描常用工具：

###### 网络空间搜索引擎（fofa、quake...)

> 
ps: 手工扫描都是实时的，相比空间搜索引擎较精准些。


###### nmap

```
nmap -vvv -Pn -p- ip/24 -n -T4  
#-v 输出详细信息，-v/-vv/-vvv v越多信息越详细 上线3个v  
#-Pn 扫描时不用ping  
#-p-  扫描所有端口（65535个）。如果不使用 -p- ，nmap 将仅扫描1000个端口，GUI参数不可用  
#-n 不做DNS解析  
#-T4 设置时间模板,0-5部分做了扫描时间优化，默认3未作优化。4加速扫描又保持一定准确性

```

```
#!/usr/bin/env bash   

read -p "ip: " ip  
nmap -v -Pn -p- --open -sV $ip -n -T4 --max-scan-delay 10 --max-retries 3 --min-hostgroup 10 -oX $ip-result-\`date +%y-%m-%d-%H-%M-%S\`.xml --script=dns-zone-transfer,ftp-anon,ftp-proftpd-backdoor,ftp-vsftpd-backdoor,ftp-vuln-cve2010-4221,http-backup-finder,http-cisco-anyconnect,http-iis-short-name-brute,http-put,http-php-version,http-shellshock,http-robots.txt,http-svn-enum,http-webdav-scan,iax2-version,memcached-info,mongodb-info,msrpc-enum,ms-sql-info,mysql-info,nrpe-enum,pptp-version,redis-info,rpcinfo,samba-vuln-cve-2012-1182,smb-vuln-ms08-067,smb-vuln-ms17-010,snmp-info,sshv1,xmpp-info,tftp-enum,teamspeak2-version,ftp-brute,imap-brute,smtp-brute,pop3-brute,mongodb-brute,redis-brute,ms-sql-brute,rlogin-brute,rsync-brute,mysql-brute,pgsql-brute,oracle-sid-brute,oracle-brute,rtsp-url-brute,snmp-brute,svn-brute,telnet-brute,vnc-brute,xmpp-brute

```

```
#!/usr/bin/env bash   

read -p "ip: " ip  
nmap -vvv -Pn -p 20,22,23,25,53,69,80-89,443,8440-8450,8080-8089,110,111,137,143,161,389,512,873,1194,1352,1433,1521,1500,1723,2082,2181,2601,3128,3312,3306,3389,3690,4848,5000,5432,5900,5984,6379,7001,7002,7003,7778,8000,8069,8888,9000,9002,9080-9081,9090,9200,10001,10002,11211,27017,50070 --open -sV $ip -n -T4 --max-scan-delay 10 --max-retries 3 --min-hostgroup 10 -oX $ip-result-\`date +%y-%m-%d-%H-%M-%S\`.xml --script=dns-zone-transfer,ftp-anon,ftp-proftpd-backdoor,ftp-vsftpd-backdoor,ftp-vuln-cve2010-4221,http-backup-finder,http-cisco-anyconnect,http-iis-short-name-brute,http-put,http-php-version,http-shellshock,http-robots.txt,http-svn-enum,http-webdav-scan,iax2-version,memcached-info,mongodb-info,msrpc-enum,ms-sql-info,mysql-info,nrpe-enum,pptp-version,redis-info,rpcinfo,samba-vuln-cve-2012-1182,smb-vuln-ms08-067,smb-vuln-ms17-010,snmp-info,sshv1,xmpp-info,tftp-enum,teamspeak2-version,ftp-brute,imap-brute,smtp-brute,pop3-brute,mongodb-brute,redis-brute,ms-sql-brute,rlogin-brute,rsync-brute,mysql-brute,pgsql-brute,oracle-sid-brute,oracle-brute,rtsp-url-brute,snmp-brute,svn-brute,telnet-brute,vnc-brute,xmpp-brute

```

###### msscan

> 
[https://github.com/robertdavidgraham/masscan](https://github.com/robertdavidgraham/masscan)


[https://github.com/7dog7/masscan_to_nmap](https://github.com/7dog7/masscan_to_nmap)

###### Goby

> 
[Goby - Attack surface mapping](https://cn.gobies.org/)


###### shuize

> 
[https://github.com/0x727/ShuiZe_0x727](https://github.com/0x727/ShuiZe_0x727)


###### fscan

> 
[https://github.com/shadow1ng/fscan](https://github.com/shadow1ng/fscan)


###### ALLin

> 
[https://github.com/P1-Team/AlliN](https://github.com/P1-Team/AlliN)


#### 4. 旁站（ip反查域名）

一个服务器上存在多个站点，可通过ip查询相应站点，再从相应站点进一步突破获取服务器权限。

###### 常见查询方法：

**在线平台：**

[同IP网站查询,C段查询,IP反查域名,在线C段,旁站工具 - WebScan](https://www.webscan.cc/)<br/>[https://viewdns.info/reverseip/](https://viewdns.info/reverseip/)<br/>[Reverse IP Lookup - All Names Hosted at an IP - DomainTools](https://reverseip.domaintools.com/)<br/>[专业精准的IP库服务商_IPIP](https://tools.ipip.net/ipdomain.php)<br/>[https://dnslytics.com/](https://dnslytics.com/)

**网络空间搜索引擎：**

**工具：**

#### 5. 端口

确定真实ip后，就可以进行端口扫描，比较常见的就是nmap和masscan了，masscan相比nmap多了速度的优势，可以快速扫描全端口。扫描可以结合空间引擎结果发现更多目标端口。

> 
tips:

[https://github.com/laconicwolf/Masscan-to-CSV](https://github.com/laconicwolf/Masscan-to-CSV)



工具可参考C段章节

##### 端口渗透思路表

引用下某大佬的端口渗透思路表，可以学习学习下。

|端口|服务|渗透用途
|------
|tcp 20,21|FTP|允许匿名的上传下载,爆破,嗅探,win提权,远程执行(proftpd 1.3.5),各类后门(proftpd,vsftp 2.3.4)
|tcp 22|SSH|可根据已搜集到的信息尝试爆破,v1版本可中间人,ssh隧道及内网代理转发,文件传输等等
|tcp 23|Telnet|爆破,嗅探,一般常用于路由,交换登陆,可尝试弱口令
|tcp 25|SMTP|邮件伪造,vrfy/expn查询邮件用户信息,可使用smtp-user-enum工具来自动跑
|tcp/udp 53|DNS|允许区域传送,dns劫持,缓存投毒,欺骗以及各种基于dns隧道的远控
|tcp/udp 69|TFTP|尝试下载目标及其的各类重要配置文件
|tcp 80-89,443,8440-8450,8080-8089|各种常用的Web服务端口|可尝试经典的topn,vpn,owa,webmail,目标oa,各类Java控制台,各类服务器Web管理面板,各类Web中间件漏洞利用,各类Web框架漏洞利用等等……
|tcp 110|POP3|可尝试爆破,嗅探
|tcp 111,2049|NFS|权限配置不当
|tcp 137,139,445|Samba|可尝试爆破以及smb自身的各种远程执行类漏洞利用,如,ms08-067,ms17-010,嗅探等……
|tcp 143|IMAP|可尝试爆破
|udp 161|SNMP|爆破默认团队字符串,搜集目标内网信息
|tcp 389|LDAP|ldap注入,允许匿名访问,弱口令
|tcp 512,513,514|Linux rexec|可爆破,rlogin登陆
|tcp 873|Rsync|匿名访问,文件上传
|tcp 1194|OpenVPN|想办法钓VPN账号,进内网
|tcp 1352|Lotus|弱口令,信息泄漏,爆破
|tcp 1433|SQL Server|注入,提权,sa弱口令,爆破
|tcp 1521|Oracle|tns爆破,注入,弹shell…
|tcp 1500|ISPmanager|弱口令
|tcp 1723|PPTP|爆破,想办法钓VPN账号,进内网
|tcp 2082,2083|cPanel|弱口令
|tcp 2181|ZooKeeper|未授权访问
|tcp 2601,2604|Zebra|默认密码zerbra
|tcp 3128|Squid|弱口令
|tcp 3312,3311|kangle|弱口令
|tcp 3306|MySQL|注入,提权,爆破
|tcp 3389|Windows rdp|shift后门[需要03以下的系统],爆破,ms12-020
|tcp 3690|SVN|svn泄露,未授权访问
|tcp 4848|GlassFish|弱口令
|tcp 5000|Sybase/DB2|爆破,注入
|tcp 5432|PostgreSQL|爆破,注入,弱口令
|tcp 5900,5901,5902|VNC|弱口令爆破
|tcp 5984|CouchDB|未授权导致的任意指令执行
|tcp 6379|Redis|可尝试未授权访问,弱口令爆破
|tcp 7001,7002|WebLogic|Java反序列化,弱口令
|tcp 7778|Kloxo|主机面板登录
|tcp 8000|Ajenti|弱口令
|tcp 8009|tomcat Ajp|Tomcat-Ajp协议漏洞
|tcp 8443|Plesk|弱口令
|tcp 8069|Zabbix|远程执行,SQL注入
|tcp 8080-8089|Jenkins,JBoss|反序列化,控制台弱口令
|tcp 9080-9081,9090|WebSphere|Java反序列化/弱口令
|tcp 9200,9300|ElasticSearch|远程执行
|tcp 11211|Memcached|未授权访问
|tcp 27017,27018|MongoDB|爆破,未授权访问
|tcp 50070,50030|Hadoop|默认端口未授权访问

---


|**端口号**|**端口说明**|**渗透思路**
|------
|21/69|FTP/TFTP：文件传输协议|爆破、内网嗅探
|22|SSH：远程连接|用户名枚举、爆破
|23|Telnet：远程连接|爆破、内网嗅探
|25|SMTP：邮件服务|邮件伪造
|53|DNS：域名系统|DNS域传送\DNS缓存投毒\DNS欺骗\利用DNS隧道技术刺透防火墙
|389|LDAP|未授权访问（通过LdapBrowser工具直接连入）
|443|https服务|OpenSSL 心脏滴血（nmap -sV --script=ssl-heartbleed 目标）
|445|SMB服务|ms17_010远程代码执行
|873|rsync服务|未授权访问
|1090/1099|Java-rmi|JAVA反序列化远程命令执行漏洞
|1352|Lotus Domino邮件服务|爆破：弱口令、信息泄漏：源代码
|1433|MSSQL|注入、SA弱口令爆破、提权
|1521|Oracle|注入、TNS爆破
|2049|NFS|配置不当
|2181|ZooKeeper服务|未授权访问
|3306|MySQL|注入、爆破、写shell、提权
|3389|RDP|爆破、Shift后门、CVE-2019-0708远程代码执行
|4848|GlassFish控制台|爆破：控制台弱口令、认证绕过
|5000|Sybase/DB2数据库|爆破、注入
|5432|PostgreSQL|爆破弱口令、高权限执行系统命令
|5632|PcAnywhere服务|爆破弱口令
|5900|VNC|爆破：弱口令、认证绕过
|6379|Redis|未授权访问、爆破弱口令
|7001|WebLogic中间件|反序列化、控制台弱口令+部署war包、SSRF
|8000|jdwp|JDWP 远程命令执行漏洞（[工具](https://github.com/IOActive/jdwp-shellifier)）
|8080/8089|Tomcat/JBoss/Resin/Jetty/Jenkins|反序列化、控制台弱口令、未授权
|8161|ActiveMQ|admin/admin、任意文件写入、反序列化
|8069|Zabbix|远程命令执行
|9043|WebSphere控制台|控制台弱口令[https://:9043/ibm/console/logon.jsp、远程代码执行](https://blog.gm7.org/%E4%B8%AA%E4%BA%BA%E7%9F%A5%E8%AF%86%E5%BA%93/01.%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/01.%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/1.%E8%B5%84%E4%BA%A7%E6%94%B6%E9%9B%86/03.IP%E6%AE%B5%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/07.%E7%AB%AF%E5%8F%A3%E5%AF%B9%E5%BA%94%E6%B8%97%E9%80%8F%EF%BC%88%E7%AB%AF%E5%8F%A3%E6%B8%97%E9%80%8F%E5%A4%87%E5%BF%98%E5%BD%95%EF%BC%89.html)
|9200/9300|Elasticsearch服务|远程代码执行
|11211|Memcache|未授权访问（nc -vv 目标 11211）
|27017|MongoDB|未授权访问、爆破弱口令
|50000|SAP|远程代码执行
|50070|hadoop|未授权访问

---


|**端口号**|**服务**|**渗透思路**
|------
|21|FTP/TFTP/VSFTPD|爆破/嗅探/溢出/后门
|22|ssh远程连接|爆破/openssh漏洞
|23|Telnet远程连接|爆破/嗅探/弱口令
|25|SMTP邮件服务|邮件伪造
|53|DNS域名解析系统|域传送/劫持/缓存投毒/欺骗
|67/68|dhcp服务|劫持/欺骗
|110|pop3|爆破/嗅探
|139|Samba服务|爆破/未授权访问/远程命令执行
|143|Imap协议|爆破161SNMP协议爆破/搜集目标内网信息
|389|Ldap目录访问协议|注入/未授权访问/弱口令
|445|smb|ms17-010/端口溢出
|512/513/514|Linux Rexec服务|爆破/Rlogin登陆
|873|Rsync服务|文件上传/未授权访问
|1080|socket|爆破
|1352|Lotus domino邮件服务|爆破/信息泄漏
|1433|mssql|爆破/注入/SA弱口令
|1521|oracle|爆破/注入/TNS爆破/反弹shell2049Nfs服务配置不当
|2181|zookeeper服务|未授权访问
|2375|docker remote api|未授权访问
|3306|mysql|爆破/注入
|3389|Rdp远程桌面链接|爆破/shift后门
|4848|GlassFish控制台|爆破/认证绕过
|5000|sybase/DB2数据库|爆破/注入/提权
|5432|postgresql|爆破/注入/缓冲区溢出
|5632|pcanywhere服务|抓密码/代码执行
|5900|vnc|爆破/认证绕过
|6379|Redis数据库|未授权访问/爆破
|7001/7002|weblogic|java反序列化/控制台弱口令
|80/443|http/https|web应用漏洞/心脏滴血
|8069|zabbix服务|远程命令执行/注入
|8161|activemq|弱口令/写文件
|8080/8089|Jboss/Tomcat/Resin|爆破/PUT文件上传/反序列化
|8083/8086|influxDB|未授权访问
|9000|fastcgi|远程命令执行
|9090|Websphere|控制台爆破/java反序列化/弱口令
|9200/9300|elasticsearch|远程代码执行
|11211|memcached|未授权访问
|27017/27018|mongodb|未授权访问/爆破

---


|**端口号**|**服务**|**渗透思路**
|------
|20|ftp_data|爆破、嗅探、溢出、后门
|21|ftp_control|爆破、嗅探、溢出、后门
|23|telnet|爆破、嗅探
|25|smtp|邮件伪造
|53|DNS|DNS区域传输、DNS劫持、DNS缓存投毒、DNS欺骗、深度利用：利用DNS隧道技术刺透防火墙
|67|dhcp|劫持、欺骗
|68|dhcp|劫持、欺骗
|110|pop3|爆破
|139|samba|爆破、未授权访问、远程代码执行
|143|imap|爆破
|161|snmp|爆破
|389|ldap|注入攻击、未授权访问
|512|linux r|直接使用rlogin
|513|linux r|直接使用rlogin
|514|linux r|直接使用rlogin
|873|rsync|未授权访问
|888|BTLINUX|宝塔Linux主机管理后台/默认帐户：admin｜默认密码：admin
|999|PMA|护卫神佩带的phpmyadmin管理后台，默认帐户：root｜默认密码：huweishen.com
|1080|socket|爆破：进行内网渗透
|1352|lotus|爆破：弱口令、信息泄露：源代码
|1433|mssql|爆破：使用系统用户登录、注入攻击
|1521|oracle|爆破：TNS、注入攻击
|2049|nfs|配置不当
|2181|zookeeper|未授权访问
|3306|mysql|爆破、拒绝服务、注入
|3389|rdp|爆破、Shift后门
|4848|glassfish|爆破：控制台弱口令、认证绕过
|5000|sybase/DB2|爆破、注入
|5432|postgresql|缓冲区溢出、注入攻击、爆破：弱口令
|5632|pcanywhere|拒绝服务、代码执行
|5900|vnc|爆破：弱口令、认证绕过
|5901|vnc|爆破：弱口令、认证绕过
|5902|vnc|爆破：弱口令、认证绕过
|6379|redis|未授权访问、爆破：弱口令
|7001|weblogic|JAVA反序列化、控制台弱口令、控制台部署webshell
|7002|weblogic|JAVA反序列化、控制台弱口令、控制台部署webshell
|80|web|常见Web攻击、控制台爆破、对应服务器版本漏洞
|443|web|常见Web攻击、控制台爆破、对应服务器版本漏洞
|8080|web｜Tomcat｜..|常见Web攻击、控制台爆破、对应服务器版本漏洞、Tomcat漏洞
|8069|zabbix|远程命令执行
|9090|websphere|文件泄露、爆破：控制台弱口令、Java反序列
|9200|elasticsearch|未授权访问、远程代码执行
|9300|elasticsearch|未授权访问、远程代码执行
|11211|memcacache|未授权访问
|27017|mongodb|爆破、未授权访问
|27018|mongodb|爆破、未授权访问
|50070|Hadoop|爆破、未授权访问
|50075|Hadoop|爆破、未授权访问
|14000|Hadoop|爆破、未授权访问
|8480|Hadoop|爆破、未授权访问
|8088|web|爆破、未授权访问
|50030|Hadoop|爆破、未授权访问
|50060|Hadoop|爆破、未授权访问
|60010|Hadoop|爆破、未授权访问
|60030|Hadoop|爆破、未授权访问
|10000|Virtualmin/Webmin|服务器虚拟主机管理系统
|10003|Hadoop|爆破、未授权访问
|5984|couchdb|未授权访问
|445|SMB|弱口令爆破，检测是否有ms_08067等溢出
|1025|111|NFS
|2082|cpanel主机管理系统登陆 （国外用较多）
|2083|cpanel主机管理系统登陆 （国外用较多）
|2222|DA虚拟主机管理系统登陆 （国外用较多）
|2601|zebra路由
|2604|zebra路由
|3128|代理默认端口,如果没设置口令很可能就直接漫游内网了
|3311|kangle主机管理系统登陆
|3312|kangle主机管理系统登陆
|4440|参考WooYun: 借用新浪某服务成功漫游新浪内网
|6082|参考WooYun: Varnish HTTP accelerator CLI 未授权访问易导致网站被直接篡改或者作为代理进入内网
|7778|主机控制面板登录
|8083|主机管理系统 （国外用较多）
|8649
|8888|主机管理系统默认端口
|9000|fcgi php执行
|50000|SAP|命令执行

**Web端口：**

```
80,81,82,443,5000,7001,7010,7100,7547,7777,7801,8000,8001,8002,8003,8005,8009,8010,8011,8060,8069,8070,8080,8081,8082,8083,8085,8086,8087,8088,8089,8090,8091,8161,8443,8880,8888,8970,8989,9000,9001,9002,9043,9090,9200,9300,9443,9898,9900,9998,10002,50000,50070

```

**服务器：**

```
21,22,445,3389,5900

```

**数据库：**

```
1433,1521,3306,6379,11211,27017

```

#### 6. IP定位

这里提供几个不错的溯源定位工具：

[openGPS位置服务](https://www.opengps.cn/Default.aspx)<br/>[高精度IP地址查询|埃文科技-IP问问|IP地址查询|IP定位|精确地址|-chaipip.com](https://www.chaipip.com/aiwen.html)<br/>[长沙活动通信科技有限公司](https://cz88.net/)

### 0x04 指纹信息

通过关键特征，去识别出目标指纹信息可以快速了解目标架构信息，调整攻击方向。

常见指纹信息：

#### 1. CMS

已知目标CMS后，可以通过已知漏洞匹配利用，如果是开源CMS，就可以进行审计精准发现问题点。

##### 开发语言识别思路
1.  通过爬虫获取动态链接然后进行正则匹配判断 1.  header头中X-Powered-By信息 1.  Set-Cookie特征信息 如包含PHPSSIONID说明是php、包含JSESSIONID说明是java、包含ASP.NET_SessionId说明是aspx。 
##### 服务器系统识别思路
1. 通过ping命令根据回显中的ttl值来判断是win还是linux，但值可被修改精准度不高。默认Linux是64，win是1281. 页面回显、报错回显、header头等站点泄露的系统信息。1. nmap
```
nmap -O IP

```

##### CMS识别思路

###### **特定文件的MD5**

一般来说，网站的特定图标、js、css等静态文件不会去修改，通过爬虫对这些文件进行抓取并与规则库中md5值做对比，如果一致就是同一CMS。这种情况不排除会出现二开导致的误报，但速度较快。

###### **页面关键字**

正则匹配关键字或报错信息判断。如Powered by Discuz、dedecms等、tomcat报错页面

###### **请求头信息关键字**

通过匹配http响应包中的banner信息来识别。

如：

###### **url关键字**

将url中存在路由、robots.txt、爬虫结果与规则库做对比分析来判断是否使用了某CMS

如：

##### 在线平台

##### 工具

> 
ps: cms识别主要还是在于指纹库的维护和更新。


##### 浏览器插件

[wappalyzer](https://www.wappalyzer.com/)

插件开源指纹库：[https://github.com/AliasIO/wappalyzer/tree/master/src/technologies](https://github.com/AliasIO/wappalyzer/tree/master/src/technologies)

#### 2. WAF

遇到WAF就得对症下药，总的来说识别分为两种手工和工具：

##### 手工

一般直接输入敏感字段触发拦截规则库就行，如XSS、SQL payload

常见的WAF拦截页面可以参考下某大佬总结的WAF一图流：[Waf识别工具和83个Waf拦截页面-腾讯云开发者社区-腾讯云](https://cloud.tencent.com/developer/article/1872310)

###### 工具

#### 3. 组件

一般通过异常报错、常用路由、常用header头来获取组件版本、配置等相关信息。

常见组件漏洞简记参考博客《组件漏洞简记》章

#### 4. 信息处理

对前期收集到的大量资产域名、ip信息批量进行存活性、title、架构、服务等信息进行验证提取时，可以用一些自动化工具筛选出有价值的数据，从而提高漏洞发现效率。

##### Ehole

> 
[https://github.com/EdgeSecurityTeam/EHole](https://github.com/EdgeSecurityTeam/EHole)
EHole是一款对资产中重点系统指纹识别的工具，在红队作战中，信息收集是必不可少的环节，如何才能从大量的资产中提取有用的系统(如OA、VPN、Weblogic...)。EHole旨在帮助红队人员在信息收集期间能够快速从C段、大量杂乱的资产中精准定位到易被攻击的系统，从而实施进一步攻击。


##### AlliN

> 
[https://github.com/P1-Team/AlliN](https://github.com/P1-Team/AlliN)
一个辅助平常渗透测试项目或者攻防项目快速打点的综合工具，由之前写的工具AG3改名而来。是一款轻便、小巧、快速、全面的扫描工具。多用于渗透前资产收集和渗透后内网横向渗透。工具从项目上迭代了一些懒人功能（比如提供扫描资产文件中，可以写绝大部分的各种形式的链接/CIDR,并在此基础上可以添加任意端口和路径）


##### Bufferfly

> 
[GitHub - dr0op/bufferfly: 攻防演习/渗透测试资产处理小工具，对攻防演习/渗透测试前的信息搜集到的大批量资产/域名进行存活检测、获取标题头、语料提取、常见web端口检测等。](https://github.com/dr0op/bufferfly)
攻防资产处理小工具，对攻防前的信息搜集到的大批量资产/域名进行存活检测、获取标题头、语料提取、常见web端口检测、简单中间识别，去重等，便于筛选有价值资产。


##### HKTools

> 
[GitHub - Security-Magic-Weapon/HKTools: 一款辅助安全研发在日常工作中渗透测试、安全研究、安全开发等工作的工具！ 程序支持Yaml格式的http请求模版](https://github.com/Security-Magic-Weapon/HKTools)
一款辅助安全研发在日常工作中渗透测试、安全研究、安全开发等工作的工具


##### EyeWitness

> 
[GitHub - RedSiege/EyeWitness: EyeWitness is designed to take screenshots of websites, provide some server header info, and identify default credentials if possible.](https://github.com/FortyNorthSecurity/EyeWitness)


Eyewitness可自动查询URL对应网站的截图、RDP服务、Open VNC服务器以及一些服务器title、甚至是可识别的默认凭据等，最终会生成一个详细的html报告。

##### anew(去重)

> 
[https://github.com/tomnomnom/anew](https://github.com/tomnomnom/anew)
好用的去重对比工具


### 0x05 敏感信息

#### 1. 目录结构及敏感文件

常见的敏感目录及文件，会对渗透突破有着很大作用，收集思路一般是爬虫采集、递归扫描、Google Hacking。

##### 常见敏感目录及文件

> 
tips:



##### 工具推荐

###### [dirsearch](https://github.com/maurosoria/dirsearch)

dirsearch 是一款使用 python3 编写的，用于暴力破解目录的工具，速度不错，支持随机代理、内容过滤。

###### [feroxbuster](https://github.com/epi052/feroxbuster)

用Rust编写的快速，简单，递归的内容发现工具

###### [yjdirscan](https://github.com/foryujian/yjdirscan)

御剑目录扫描专业版

##### 字典推荐

###### [fuzzDicts](https://github.com/TheKingOfDuck/fuzzDicts)

庞大的Web Pentesting Fuzz 字典，部分精准度不错，可惜更新是2021的时候了。

###### [Web-Fuzzing-Box](https://github.com/gh0stkey/Web-Fuzzing-Box)

Web Fuzzing Box - Web 模糊测试字典与一些Payloads，主要包含：弱口令暴力破解、目录以及文件枚举、Web漏洞...

字典运用于实战案例：[WebFuzzing方法和漏洞案例总结 · Chen's Blog](https://gh0st.cn/archives/2019-11-11/1)

###### [XXE 暴力枚举字典](https://mp.weixin.qq.com/s/7kUFx6VpCgNVomQ_e6H6HA)

#### 2. JS信息收集

js文件一般用于帮助网站执行某些功能，存储着客户端代码，可能会存在大量的敏感信息，通过阅读分析可能会找到宝藏。

##### JS信息查找方法

###### 1. 手工

通过查看页面源代码信息，找到.js后筛选特定信息，但这种方法费时费力，一般网站都会存在大量的js文件，还多数为混淆后的信息。

关键信息查找可以使用浏览器自带的全局搜索：

如：通过path:来查Vue框架路由

###### 2. 半自动

通过抓包拦截获取url后使用脚本筛选，比如`Burp Suite`专业版，可以在`Target &gt; sitemap`下，选中目标网站选中`Engagement tools -&gt; Find scripts`，找到网站所有脚本内容。

也可以使用`Copy links in selected items`复制出选中脚本项目中所包含的URL链接。

粘贴下，然后就可以手工验证url信息价值，有时候可以发现一些未授权、敏感的api接口或者一些GitHub仓库、key值等。

这种方法因为结合手工，在一些深层目录架构中，通过`Burp Suite script`可以获取到一些工具跑不到的js信息。

###### 3. 工具：

**[JSFinder](https://github.com/Threezh1/JSFinder)**

> 
JSFinder是一款用作快速在网站的js文件中提取URL，子域名的工具


[JSINFO-SCAN](https://github.com/p1g3/JSINFO-SCAN)

> 
递归爬取域名(netloc/domain)，以及递归从JS中获取信息的工具


[URLFinder](https://github.com/pingc0y/URLFinder)

> 
URLFinder是一款用于快速提取检测页面中JS与URL的工具。
功能类似于JSFinder，但JSFinder好久没更新了。


[HAE](https://github.com/gh0stkey/HaE)

> 
**HaE**是基于 `BurpSuite Java插件API` 开发的请求高亮标记与信息提取的辅助型框架式插件，该插件可以通过自定义正则的方式匹配响应报文或请求报文，并对满足正则匹配的报文进行信息高亮与提取。如匹配敏感信息、提取页面中的链接信息等。


[Repo-supervisor](https://github.com/auth0/repo-supervisor#)

> 
Repo-supervisor 是一种工具，可帮助您检测代码中的秘密和密码。
[command-line-mode](https://github.com/auth0/repo-supervisor#command-line-mode) 功能：
CLI 模式允许使用源代码扫描本地目录以检测文件中的机密和密码。结果可能以明文或 JSON 格式返回。


###### 4. 其他辅助工具

信息收集过程中，js文件不用仅限于当前网站版本，网站的历史版本中也可能会存在一些未失效的关键信息。

###### 历史界面

[wayback](https://archive.org/web/)会记录网站版本更迭，可以获取到之前版本的网站，不仅可以用于收集历史js文件，也有可能找到一些后来删除的敏感资产信息，或者一些漏洞

**历史信息查找工具：**

[waybackurls](https://github.com/tomnomnom/waybackurls)

> 
获取 Wayback Machine 知道的域的所有 URL


收集历史js文件

webbackurls target.com | grep "\.js" | uniq |sort

通过`Wayback Machine`收集到的url js列表需要进行存活检验，避免误报，可以使用curl命令或者[hakcheckurl](https://github.com/hakluke/hakcheckurl)工具进行检验。最后在做url提取即可。

###### 反混肴

对于存在混淆的代码需要进行反混淆美化下，使其更易看懂

[js-beautify](https://github.com/beautify-web/js-beautify)

> 
这个小美化器将重新格式化和重新缩进书签、丑陋的 JavaScript、由 Dean Edward 的流行打包程序打包的解包脚本，以及由 npm 包 [javascript-obfuscator](https://github.com/javascript-obfuscator/javascript-obfuscator)处理的部分去混淆脚本。


**[de4js](https://lelinhtinh.github.io/de4js/)**

> 
在线JavaScript 反混淆器和解包器


###### url采集

[Rad](https://stack.chaitin.com/tool/detail?id=2)

一款专为安全扫描而生的浏览器爬虫。

[whatweb-plus](https://github.com/winezer0/whatweb-plus)

获取网站title头及Web指纹

[url-extractor](http://www.bulkdachecker.com/url-extractor/)

在线url提取

##### js中关键信息简记

#### 3. Google Hacking

Google作为一款全球通用的发达搜索引擎，爬取的和收录的数据量也是庞大无比，善用搜索引擎语法可以帮忙我们发现更多敏感信息。

##### 说明

|指令|用法|示例
|------
|“”（引号）|用引号来查询一个确切的单词或短语|查找有关《百年孤独》这本书的网页，语法：“百年孤独”
|OR（或者）|用OR分隔搜索词，同时执行两个搜索查询，这将找到包含多个单词之一的页面。|搜索引用了“Google Drive”、“Dropbox”或“OneDrive”的页面，语法：Google Drive OR Dropbox OR OneDrive
|-（减号、连字符）|在单词或网站前使用连字符将其从搜索结果中排除|从搜索结果中排除www主机名，语法：-www site:wikipedia.org
|allintext:|使用allintext:[搜索短语]查找正文中包含这些单词的页面|查找正文中有关Roth、IRA投资讯息的页面，语法：allintext:Roth IRA 投资
|allintitle:|使用allintitle:[搜索短语]查找标题中包含这些单词的页面|查找标题中同时包含“Apple”和“notebook”的页面，语法：allintitle:Apple notebook
|allinurl:|使用allinurl:[搜索短语]查找URL中包含这些单词的页面|查找URL中同时包含”Microsoft” and “Surface”的页面，语法：allinurl:Microsoft Surface
|site:|使用site:[URL]将搜索结果限制到特定网站|查找云点SEO网关于谷歌SEO的页面，语法：site:yundianseo.com 谷歌SEO
|~（波浪号）|使用波浪号获得目标关键词及其近似词的搜索结果|查找SEO方面的策略或者教程，语法：SEO ~教程
|related:|使用related:[URL]查找与特定网站类似的网站|查找与云点SEO类似的网站，语法：related:yundianseo.com
|define:|使用define:[搜索短语]查找其定义|查找SEO的定义，语法：define:SEO
|$|使用$查找特定价格的商品|查找一款售价在99美金的手机，语法：mobile phone $99
|location:|使用location:[地点]查看某个地区内的相关信息|查询南京的酒店，语法：hotel location:Nanjing
|*（星号）|添加星号作为未知单词或事实的占位符|查找以“生活就像一个”开头的引语，语法：生活就像一个*
|filetype:|使用filetype:[后缀]将结果限制为特定的文件格式，如PDF或DOC。|查找PDF格式的Microsoft Office键盘快捷键相关文件，语法：filetype:pdf Microsoft Office键盘快捷键
|..（两点）|用两个句点分隔数字，不带空格，以搜索该范围内的数字|查找1950年至2000年间发生的计算机里程碑，语法：”计算机里程碑” 1950..2000
|AROUND(n)|在两个搜索词之间加上AROUND(n)，以查找两个词间有特定距离的页面。用数字n设置术语之间的最大距离，这对于查找两个搜索词之间的关系很有用。|查找在同一句话或段落中提到Facebook和Microsoft的页面，语法：Facebook AROUND(7) Microsoft

##### hacking常用语法

###### 管理后台地址

```
site:target.com intext:管理 | 后台 | 后台管理 | 登陆 | 登录 | 用户名 | 密码 | 系统 | 账号 | login | system  
site:target.com inurl:login | inurl:admin | inurl:manage | inurl:manager | inurl:admin_login | inurl:system | inurl:backend  
site:target.com intitle:管理 | 后台 | 后台管理 | 登陆 | 登录

```

###### 上传类漏洞地址

```
site:target.com inurl:file  
site:target.com inurl:upload

```

###### 注入页面

```
site:target.com inurl:?id=  
site:target.com inurl:php?id=

```

###### 编辑器页面

```
site:target.com inurl:ewebeditor

```

###### 目录遍历漏洞

```
site:target.com intitle: "index of"

```

###### SQL错误

``<br/> site:target.com intext:"sql syntax near" | intext:"syntax error has occurred" | intext:"incorrect syntax near" | intext:"unexpected end of SQL command" | intext:"Warning: mysql_connect()" | intext:”Warning: mysql_query()" | intext:"Warning: pg_connect()"

```
##### phpinfo

```

site:target.com ext:php intitle:phpinfo "published by the PHP Group"

```
##### 配置文件泄露

```

site:target.com ext:.xml | .conf | .cnf | .reg | .inf | .rdp | .cfg | .txt | .ora | .ini

```
##### 数据库文件泄露

```

site:target.com ext:.sql | .dbf | .mdb | .db

```
##### 日志文件泄露

```

site:target.com ext:.log

```
##### 备份和历史文件泄露
```bash
site:target.com ext:.bkf | .bkp | .old | .backup | .bak | .swp | .rar | .txt | .zip | .7z | .sql | .tar.gz | .tgz | .tar

```

###### 公开文件泄露

```
site:target.com filetype:.doc | .docx | .xls | .xlsx | .ppt | .pptx | .odt | .pdf | .rtf | .sxw | .psw | .csv

```

###### 邮箱信息

```
site:target.com intext:@target.com  
site:target.com 邮件  
site:target.com email

```

###### 社工信息

```
site:target.com intitle:账号 | 密码 | 工号 | 学号 | 身份证

```

##### **tips：**

site:xx.com指定搜索发现多个垃圾数据，大概率中招过。（黑帽SEO劫持）

> 
ps: 百度、搜狗、bing也是可以使用语法精确搜索，但限于seo逻辑、广告、资源等多个因素，经常不如Google，但有时候结合又有不错的收获。


##### 百度语法

##### 图片反查

###### 百度识图、googleimage、tineye等识图引擎

###### 从图片原图获取坐标

###### 在线查看器

改图宝<br/>[照片Exif信息在线查看器 - 改图宝](https://www.gaitubao.com/exif)<br/> 图虫EXIF查看器<br/>[EXIF信息查看器](https://exif.tuchong.com/)<br/> 我爱斗图<br/>[https://www.52doutu.cn/tools/exif](https://www.52doutu.cn/tools/exif)<br/> python-exifread 库<br/>[https://link.zhihu.com/?target\=https%3A//pypi.python.org/pypi/ExifRead](https://link.zhihu.com/?target%5C=https%3A//pypi.python.org/pypi/ExifRead)

###### 经纬度转地址

GPS查询网址1<br/>[http://www.gpsspg.com/maps.htm](http://www.gpsspg.com/maps.htm)<br/> GPS查询网址2<br/>[经纬度定位|经纬度定位软件|经纬度定位工具|全球卫星定位地图](http://www.gzhatu.com/dingwei.html)<br/> 地球在线<br/>[卫星地图-Google Earth高清卫星地图-谷歌地图-地球在线](https://www.earthol.com/)<br/> python-geopy库<br/>[欢迎使用Geopy文档！ — GeoPy 2.4.0 文档](https://www.osgeo.cn/geopy/)

#### 4. Github信息收集

自从学会使用github并在上面乱捣鼓找到一些站点账号或源码后，就此走上不归路，各种Github监控搞上，又发现一些阿里key，简直是宝了……

##### Github搜索语法

**高级搜索：**[https://github.com/search/advanced](https://github.com/search/advanced)

**Github高级搜索语法：[了解搜索语法 - GitHub 文档](https://docs.github.com/cn/search-github/getting-started-with-searching-on-github/understanding-the-search-syntax?spm=a2c6h.12873639.article-detail.6.55db74b8e8hJQq)**

Github有着自己的搜索语法，善用搜索语法能发现更多的有用信息。一般来说，Github搜索都是以域名、备案、js路径、网站技术支持等关键内容为主。

搜索包含"`AccessKey ID`"和`password`内容的代码。

一些工具中总结了一些常见的搜索语法：

[https://github.com/obheda12/GitDorker/tree/master/Dorks](https://github.com/obheda12/GitDorker/tree/master/Dorks)

搜索常用语法，可以搜索到一些敏感的私钥，一些SSH登录私钥，mysql的数据库密码，API key等等

```
"token"  
"password"  
"secret"  
"passwd"  
"username"  
"key"  
"apidocs"  
"appspot"  
"auth"  
"aws\_access"  
"config"  
"credentials"  
"dbuser"  
"ftp"  
"login"  
"mailchimp"  
"mailgun"  
"mysql"  
"pass"  
"pem private"  
"prod"  
"pwd"  
"secure"  
"ssh"  
"staging"  
"stg"  
"stripe"  
"swagger"  
"testuser"  
"jdbc"  
extension:pem private  
extension:ppk private  
extension:sql mysql dump password  
extension:json api.forecast.io  
extension:json mongolab.com  
extension:yaml mongolab.com  
extension:ica \[WFClient\] Password\=  
extension:avastlic “support.avast.com”  
extension:js jsforce conn.login  
extension:json googleusercontent client\_secret  
“target.com” send\_keys  
“target.com” password  
“target.com” api\_key  
“target.com” apikey  
“target.com” jira\_password  
“target.com” root\_password  
“target.com” access\_token  
“target.com” config  
“target.com” client\_secret  
“target.com” user auth

```

##### 收集工具

###### GitDorker

> 
[https://github.com/obheda12/GitDorker](https://github.com/obheda12/GitDorker)


GitDorker 是一款github自动信息收集工具，它利用 GitHub 搜索 API 和作者从各种来源编译的大量 GitHub dorks 列表，以提供给定搜索查询的 github 上存储的敏感信息的概述。

###### trufflehog

> 
[https://github.com/trufflesecurity/trufflehog](https://github.com/trufflesecurity/trufflehog)


Truffle Hog是一款采用Python开发的工具，它可以检索GitHub代码库的所有代码提交记录以及分支，并搜索出可以表示密钥(例如AWS密钥)的高熵字符串。一般用来探测泄漏密钥的工具，支持扫描的数据源包括git、github、gitlab、S3、文件系统、文件和标准输入。

###### 其他检索方法：

[https://github.com/BishopFox/GitGot](https://github.com/BishopFox/GitGot)

[https://github.com/UKHomeOffice/repo-security-scanner](https://github.com/UKHomeOffice/repo-security-scanner)

[https://github.com/gwen001/github-search](https://github.com/gwen001/github-search)

[https://github.com/eth0izzle/shhgit](https://github.com/eth0izzle/shhgit)

[https://github.com/lightless233/geye](https://github.com/lightless233/geye)

[https://github.com/cve-search/git-vuln-finder](https://github.com/cve-search/git-vuln-finder)

[https://github.com/Securityautomation/DumpTheGit](https://github.com/Securityautomation/DumpTheGit)

[https://github.com/4x99/code6](https://github.com/4x99/code6)

[https://github.com/tillson/git-hound](https://github.com/tillson/git-hound)

##### 代码仓库在线搜索平台

###### pinatahub

> 
[https://pinatahub.incognita.tech](https://pinatahub.incognita.tech/)
github敏感信息搜索引擎，有时候github搜索查看不方便，可以直接在这个网站搜索。


###### searchcode

> 
[searchcode | source code search engine](https://searchcode.com/)
SearchCode从Github、BitBucket、CodePlex、SourceForge、Fedora等代码仓库里筛选了近160亿行开源代码，你能够使用文件扩展、特定代码库名字、URL、正则表达式、特殊字符等过滤器对源代码进行过滤，以便搜到你想要的代码。


##### 其他仓库

GitLab: [The DevSecOps Platform | GitLab](https://about.gitlab.com/)

gitee: [Gitee - 基于 Git 的代码托管和研发协作平台](https://gitee.com/)

csdn：[项目 · 探索 · GitCode](https://gitcode.net/explore)

#### 5. 邮箱信息收集

有时候不仅是正面硬刚就可以的，还需要迂回战术配合出击，正如攻防中社工一样，总会有一些意想不到的成果。随着办公网络的发展，邮箱也成为了常用的办公方式之一。攻防也是从信息收集逐渐延伸到钓鱼上，只要钓鱼技术好，轻轻松松混入内部，而要想社工钓鱼玩得溜，邮件方面是一个重要的突破口。

> 
tips: 邮箱建议做筛选，把一些疑是网络管理员、运维人员、安全部门的人员提取出来，单独发送或者不发，由于这部分人员安全意识偏高，容易打草惊蛇，一般多针对非技术人员，容易下手。


##### 邮箱入口查找方法

> 
邮件服务器主要从端口和title标识两个信息点去确认的。


邮件服务器常见端口：

邮件服务器常见title：

###### C段扫描寻找入口

###### 通过子域名扫描寻找入口

主要通过一些子域名收集工具去确认，如：Subdomainbrute、ksubdomain、Oneforall、Sublist3r、TeeMO、LangSrcCurise、Layer挖掘机等。

###### 通过搜索引擎寻找入口

战场主力也还是Google hacking和网络空间搜索引擎
1. **Google Hacking**
```
site:target.com intitle:"Outlook Web App"  
site:target.com intitle:"mail"  
site:target.com intitle:"邮箱"

```
1. **网络空间搜索引擎**
`(group\==阿里&amp;&amp;title\==邮箱)`

##### 邮箱收集方法

###### 搜索引擎

###### Google Hacking

> 



###### 网络空间搜索引擎

**0.zone邮箱收集**

`email\_type\==邮箱&amp;&amp;(group\==阿里)`

###### 在线收集平台

> 
ps: 基本都需要注册，注册获取的信息比游客多好多，有些还需要绑定手机号。


###### [Snov.io](https://app.snov.io/)

Snovio是一个集成了“LinkedIn、GitHub、Moz、StackOverflow、Indeed、Behance、Upwork、Google页面邮箱采集”+“邮箱验证”+“联系人管理”+“邮件发送”为一身的网站。在Snovio只要输入一个域名，就可以采集到该域名在以上平台中暴露的所有邮箱地址，还支持API批量读取。

强大的邮箱收集，可单个收集也可以批量收集，还支持api调用。

> 



###### [hunter](https://hunter.io/)

Hunter可让您在几秒钟内找到专业的电子邮件地址，并与对您的业务重要的人建立联系。

> 
打码信息需要注册绑定手机号后才能看到。


###### [phonebook](https://phonebook.cz/)

Phonebook例举所有的域名，邮件地址，或者是所予域名的url，支持*.gov.uk的通配符，有340亿条记录。可以批量下载想要的域名。

###### [intelx](https://intelx.io/)

intelx是一个搜索引擎和数据存档。通过电子邮件，域名，IP, CIDR，比特币地址等等查找数据泄露信息。随便搜一下好像搜索出了一个泄露的邮箱数据库：

###### [skymem](http://www.skymem.info/)

一款可查找公司和人员的电子邮件地址在线邮箱查找平台，数据量较少，准确度高，大批量的需要购买。

###### 爱企查、企查查等批量查询

如通过爱企查的爱番番寻宝客“获取更多的联系方式”

如使用八爪鱼采集器进行批量查询

[企查查企业邮箱采集 - 八爪鱼采集器](https://www.bazhuayu.com/tutorial/qccqyemailcj)

###### 邮箱泄露信息查询

###### 其他

###### 工具收集

###### [theHarvester](https://github.com/laramies/theHarvester)

> 
theHarvester是Kali自带的一款社会工程学工具，默认集成了多个api，利用网络爬虫技术通过Google、Bing、PGP、LinkedIn、Baidu、Yandex、People123、Jigsaw、Shodan、PGP服务器等不同公开源整理收集，能够收集e-mail、用户名、主机名、子域名、雇员、开放端口和Banner等信息。


theHarvester 参数详解

```
  -h, \--help            show this help message and exit    #显示帮助信息并退出  
  -d, \--domain          DOMAIN Company name or domain to search.    #要搜索的公司名称或域名  
  -l, \--limit           LIMIT Limit the number of search results, default\=500.  #采集特定数量的结果，不指定情况下，默认为500  
  -S, \--start           START Start with result number X, default\=0.    #从采集到的信息编号“X”处开始执行采集，默认从0开始  
  -g, \--google-dork     Use Google Dorks for Google search.     #使用google Dorks进行google搜索。 （一般情况下不用，你懂的）  
  -p, \--proxies         Use proxies for requests, enter proxies in proxies.yaml.    #对信息采集的请求使用代理  
  -s, \--shodan          Use Shodan to query discovered hosts.       #使用shodan查询发现的主机  
  --screenshot Take screenshots of resolved domains specify output directory:       #对解析域的页面进行截图，需指定截图文件存放目录  
        \--screenshot output\_directory      \# 截图保存目录  
  -v, \--virtual-host    Verify host name via DNS resolution and search for virtual hosts.       #通过DNS解析主机名并搜索虚拟主机  
  -e, \--dns-server DNS\_SERVER DNS server to use for lookup.     #指定DNS解析服务器  
  -t, \--dns-tld DNS\_TLD  Perform a DNS TLD expansion discovery, default False.      #执行DNS TLD扩展发现，默认为False状态  
  -r, \--take-over       Check for takeovers.    #检查接管  
  -n, \--dns-lookup      Enable DNS server lookup, default False.       \# 启用DNS服务器查找，默认为False状态                                                                                                       
  -c, \--dns-brute       Perform a DNS brute force on the domain.       \# 进行DNS域解析暴力破解                                                                                                           
  -f, \--filename        Save the results to an HTML and/or XML file.    #指定输出文件名，格式支持HTML和XML                                                                                                         
  -b SOURCE, \--source SOURCE                                                                                                                                                     
                        baidu, bing, bingapi, bufferoverun, certspotter, crtsh, dnsdumpster, duckduckgo, exalead, github-code, google, hackertarget, hunter, intelx,             
                        linkedin, linkedin\_links, netcraft, otx, pentesttools, projectdiscovery, qwant, rapiddns, securityTrails, spyse, sublist3r, threatcrowd, threatminer,    
                        trello, twitter, urlscan, virustotal, yahoo     #指定采集信息的源  

```

**常用参数**

-d：指定搜索的域名或网址<br/> -b：指定采集信息的源（如baidu，biying，google）<br/> -l：指定采集信息的返回数量，默认500<br/> -f：输出文件名并保存采集结果，可以保存为HTML或XML格式；如果不指定，采集信息仅作屏幕显示

> 
api key没有配置的时候，结果较少。


##### 验证邮箱

收集到邮箱后，就要对其进行存活性验证，避免出现被弃用、不可用的邮箱。

###### 在线平台

###### 工具

**verifyemail**

> 
[https://github.com/Tzeross/verifyemail](https://github.com/Tzeross/verifyemail)
Python在线验证邮箱真实性，支持批量验证，支持全部域名邮箱，支持全部域名邮箱，支持全部域名邮箱，支持全部域名邮箱


##### 邮箱爆破

> 
弱口令爆破方式只适用于目标企业自己的邮件服务器如owa等，对第三方邮箱不优先考虑


###### 常用字典组合

> 
员工名称拼音/首字母
员工名称拼音/首字母+日期
公司简称+年份
员工名称+公司名
passwd+日期
P@sswd!+日期


**爆破字典**

[https://github.com/rootphantomer/Blasting_dictionary](https://github.com/rootphantomer/Blasting_dictionary)

[https://github.com/TheKingOfDuck/fuzzDicts](https://github.com/TheKingOfDuck/fuzzDicts)

###### 工具

爆破邮箱大概分为两种情况

> 
邮箱相关端口：
SMTP默认端口：25
POP3默认端口：110
IMAP默认端口：143


##### 临时邮箱

```
#所谓的十分钟邮箱类  
http://www.yopmail.com/zh/  
https://10minutemail.com/  
https://10minutemail.net/  
https://www.guerrillamail.com/zh/inbox  
http://www.fakemailgenerator.com/  
https://temp-mail.org/en/  
https://www.guerrillamail.com/  
http://tool.chacuo.net/mailsend  
https://maildrop.cc/  
http://tool.chacuo.net/mailanonymous  
https://tempmail.altmails.com/  
https://www.snapmail.cc/  
https://www.linshi-email.com/

```

##### 匿名邮箱

#### 6. 网盘信息收集

一些安全意识薄弱的人员对于上传到网盘上的资源未作加密限制或者密码泄露，然后又被一些云盘爬虫给收集到，最终导致信息泄露。通过一些网盘引擎可以获取到其中的泄露信息。

##### 在线平台

[https://lzpan.com/](https://lzpan.com/)<br/> 凌风云：[十大网盘搜索引擎 - 凌风云](https://www.lingfengyun.com/)<br/> 蓝菊花：[http://www.lanjuhua.com/](http://www.lanjuhua.com/)<br/> 大力盘：[https://www.dalipan.com/](https://www.dalipan.com/)<br/> 猪猪盘：[网盘搜索神器_百度云网盘搜索引擎-猪猪盘](http://www.zhuzhupan.com/)<br/> PanSou：[http://www.pansou.com/](http://www.pansou.com/)<br/> 盘飞飞：[https://panfeifei.com/](https://panfeifei.com/)

由于网盘搜索工具的时效性，可以通过搜索引擎去获取一些。

###### 搜索关键词

关键词一般以单位名称、别称、产品业务等

##### 爬虫

> 



### 0x06 其他信息

#### 1. APP

通过获取App配置、数据包，去获取url、api、osskey、js等敏感信息。

##### App查找入口

###### 搜索引擎

###### 在线聚合平台

##### App敏感信息收集

> 
ps：App关联打算另写一篇。


###### 手工收集

一般是通过抓包收集接口数据或者逆向获取配置数据。

###### **工具推荐：**

**AppInfoScanner**

> 
[https://github.com/kelvinBen/AppInfoScanner](https://github.com/kelvinBen/AppInfoScanner)
一款适用于以HW行动/红队/渗透测试团队为场景的移动端(Android、iOS、WEB、H5、静态网站)信息收集扫描工具，可以帮助渗透测试工程师、攻击队成员、红队成员快速收集到移动端或者静态WEB站点中关键的资产信息并提供基本的信息输出,如：Title、Domain、CDN、指纹信息、状态信息等。


**ApkAnalyser**

> 
[https://github.com/TheKingOfDuck/ApkAnalyser](https://github.com/TheKingOfDuck/ApkAnalyser)
一键提取安卓应用中可能存在的敏感信息。
目前可提取APK内：



#### 2. OSINT

> 
OSINT(Open-source intelligence) 指开源情报,一项从媒体、网络、博客、视频，等公开来源中进行信息收集、提取的技术。


##### 情报相关资源

##### **OSINT 情报工具**

#### 3. 个人隐私信息

##### **从邮箱查询**

##### 从用户名查询

##### 从IP查询

##### 混合查询

##### 从注册信息查询

Sms<br/>[https://www.materialtools.com/](https://www.materialtools.com/)<br/>[Receive SMS Online Free | Temporary phone numbers](http://receivefreesms.com/)<br/> Email<br/>[https://10minutemail.net/](https://10minutemail.net/)<br/>[临时邮箱、十分钟邮箱（10分钟)、临时邮、临时Email、快速注册Email、24Mail--查错网](http://24mail.chacuo.net/)<br/>[即弃电子邮箱 » 在线接收邮件，保护您的隐私 | mytrashmailer.com](https://zh.mytrashmailer.com/)<br/>[Temporary mailbox, the mailbox ten minutes (10 minutes), a temporary post, temporary Email, fast registration Email, 24Mail--查错网](http://24mail.chacuo.net/enus)<br/>[https://www.linshiyouxiang.net/](https://www.linshiyouxiang.net/)<br/> Fake id<br/>[Generate a Random Name - Fake Name Generator](https://www.fakenamegenerator.com/)<br/>[美国地址生成，美国人虚构信息生成-世界各国虚拟身份信息、地址、信用卡生成](http://www.haoweichi.com/)<br/>[https://www.fakeaddressgenerator.com/](https://www.fakeaddressgenerator.com/)

#### 4. 历史漏洞

#### 5. 蜜罐识别

> 
通常**将蜜罐(honeypot)定义为一种安全资源，它不需要提供实际的应用，蜜罐的存在价值就是诱导和记录攻击行为，从而了解攻击者的入侵方法和手段，并能够延缓其攻击进程**，进而根据捕获的攻击行为数据，分析攻击者使用的攻击方法和工具，从而让防御方针对性地增强系统的安全防护能力


**简单识别**

## 工具向

> 
持续更新……


[https://github.com/0x727/ShuiZe_0x727](https://github.com/0x727/ShuiZe_0x727)

> 
作者：[Ske](https://github.com/SkewwG)
团队：[0x727](https://github.com/0x727)，未来一段时间将陆续开源工具，地址：[https://github.com/0x727](https://github.com/0x727)
定位：协助红队人员快速的信息收集，测绘目标资产，寻找薄弱点
语言：python3开发
功能：一条龙服务，只需要输入根域名即可全方位收集相关资产，并检测漏洞。也可以输入多个域名、C段IP等，具体案例见下文。
调用：脚本借用了ksubdomain爆破子域名和theHarvester收集邮箱，感谢ksubdomain和theHarvester作者


[https://github.com/TophantTechnology/ARL](https://github.com/TophantTechnology/ARL)

> 
旨在快速侦察与目标关联的互联网资产，构建基础资产信息库。 协助甲方安全团队或者渗透测试人员有效侦察和检索资产，发现存在的薄弱点和攻击面。


[https://github.com/wgpsec/ENScan_GO](https://github.com/wgpsec/ENScan_GO)

> 
由狼组安全团队的 Keac 师傅写的专门用来解决企业信息收集难的问题的工具，可以一键收集目标及其控股公司的 ICP 备案、APP、小程序、微信公众号等信息然后聚合导出。


> 
一个用于暴力破解的工具：



> 
SecLists是安全测试人员的伴侣。它是安全评估期间使用的多种类型列表的集合，收集在一个地方。列表类型包括用户名、密码、URL、敏感数据模式、模糊测试负载、Web Shell 等等。目标是使安全测试人员能够将此存储库拉到一个新的测试框上，并可以访问可能需要的每种类型的列表。


[OSINT开源情报与侦察工具](https://www.osint-labs.org/tools/)

[https://ip.skk.moe/](https://ip.skk.moe/)

## 参考

[红队信息收集到打点 - 先知社区](https://xz.aliyun.com/t/11112)

[https://mp.weixin.qq.com/s/MSLwTsfahF2NSSdDznvetw](https://mp.weixin.qq.com/s/MSLwTsfahF2NSSdDznvetw)

[渗透测试-信息打点（红队工具篇）_渗透测试打点_告白热的博客-CSDN博客](https://blog.csdn.net/qq_53577336/article/details/122828715)

[DNS域传送漏洞(一) | 李劼杰的博客](https://www.lijiejie.com/dns-zone-transfer-1/)

[https://github.com/bin-maker/2021CDN/](https://github.com/bin-maker/2021CDN/)

[CDN如何绕过概念性总结 - FreeBuf网络安全行业门户](https://www.freebuf.com/articles/web/265016.html)

 

 
