# 原创
：  实战-白捡的漏洞

# 实战-白捡的漏洞

## 起因

这个漏洞网站，说实话，来的有点意外。我最初是因为想在bing上试试google hack语法，但是试了一圈下来，发现bing有点点拉跨，然后就换了百度搜索引擎，然后随便试了一个条件：<br/>`inurl:.php?id=1 admin`<br/> 然后就出来一个phpadmin的站点。本着试试看的心态点进去。然后就有了后续的故事。<br/> 所以说，我们还是得主动一些，主动才会有故事(狗头保命)

## 漏洞挖掘

说来也巧，我当时的网络状况有一点点差，当我点击打开网站之后，页面先是白了一下，然后跳出了一些配置项的内容，之后才跳转到登录页面。直觉告诉我，这个站不对劲。

ok，既然感觉不对，那就开测呗。先通过熊猫头查看了一下在登录页面下敏感路径。

em？怎么什么都没有。那这就不对了，刚刚看白的还闪过一堆内容呢，怎么可能会是空的。遇事不决，f12。看看前端的源码咯。

仔细一看，好家伙，原来是用iframe来写的，熊猫头不能访问到里面的内容。那这就好办了，这里用一个小技巧：通过 `view-source:http://xxxx/target.php` 来获取到iframe中的内容：

之所以这操作，其实是因为这个网站有点拉，在没有登录时，会通过JavaScript进行跳转，但是数据仍然会正常返回(后面又解释)。通过 `view-source:` 协议能够阻断js的运行，这样就可以查看到要访问的接口的页面的数据了。当然，你也尝试设置浏览器，禁用js来防止它进行跳转。<br/> 这样就能通过熊猫头获得相应的接口信息了：

有了这些信息之后，接下来就可以借助burpsuit进行暴破，看看是否存在未授权访问漏洞了。<br/> 搞起。<br/> 先抓个包，然后发送到 `Intruder` 模块下，使用狙击枪模式，设置暴破点为url位置，然后将熊猫头识别到的接口作为字典进行暴破

经过暴破之后，对结果进行简单的分析，这些接口，绝大部分都是未授权访问。emmmmm 就挺离谱。<br/> 这个代码就写的离谱：

emmmmmm，查完数据再用js来跳转是几个意思？

爽飞，接下来就是对这些能够通过禁用js绕过权限限制的接口进行访问了，先访问一手相应最大的这个接口。emm，怎么说呢，算是信息泄露吧，28w条数据，主要记录了用户访问的网站链接和时间。少量qq邮箱和新浪邮箱账号信息。

简单该点数据，然后就：

啥也别说了，sqlmap走起。尴尬，没扫出来。这个点按理来说SQL注入是跑不了的，不过我比较懒，不想手工测。然后就跳过了。<br/>`taobao2/search.php`<br/> 又是一个信息泄露，不过这次是用户搜索过的商品的记录。

同样测一下SQL注入，这次就没有偷懒，抓了一个请求包，然后根据请求包来进行验证。

这不就有了吗？舒服。跑个库名验证一下

<br/> 点到为止，接着测其他的接口：`shenhe/fanli/index.php`<br/> 这个接口存在文件上传功能

很难受，这个文件上传之后，没有任何的回显，无法确认数据是否上传成功。gg<br/> 试试搜索框：SQL注入+1

剩下的一些接口，也没有什么产出。

## 总结

这次测试主要成果就是：
1.  接口未授权访问 1.  信息泄露 1.  SQL注入 
修复建议：

溜了溜了，提个漏洞结束。<br/> 现在网站开发使用前后端分离，所以在对于一些网站有发现接口时，都可以尝试去fuzz测试一下，说不定会有以外收获

> 
申明：本公众号所分享内容仅用于网络安全技术讨论，切勿用于违法途径，
所有渗透都需获取授权，违者后果自行承担，与本号及作者无关，请谨记守法.


**没看够~？欢迎关注！**

## **免费领取安全学习资料包！**<img alt="" height="768" src="https://img-blog.csdnimg.cn/554fc33024084bb189fac847fa13a29c.png" width="1024"/>

渗透工具

技术文档、书籍

<img alt="" height="516" src="https://img-blog.csdnimg.cn/90b96d2fd7d04118b6584760c282ada3.png" width="852"/> <img alt="" height="523" src="https://img-blog.csdnimg.cn/4a9c71c5631049b1bfef3a86800e7708.png" width="856"/>

面试题

帮助你在面试中脱颖而出

视频

基础到进阶

环境搭建、HTML，PHP，MySQL基础学习，信息收集，SQL注入,XSS，CSRF，暴力破解等等

<img alt="" height="481" src="https://img-blog.csdnimg.cn/9223c2ff51fb4a9bbb1f93ee3a11b8f9.png" width="694"/> <img alt="" height="77" src="https://img-blog.csdnimg.cn/f0bd99660d1943a69066aa42513dc557.png" width="665"/>

应急响应笔记

学习路线
